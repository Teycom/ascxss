<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>AvaliaÃ§Ã£o MÃ©dica | MedDigital</title>
  <meta name="description" content="Complete sua avaliaÃ§Ã£o mÃ©dica para emissÃ£o do atestado digital.">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¥</text></svg>">
  <link rel="stylesheet" href="src/styles/main.css">
</head>
<body>
  <!-- Header -->
  <header class="app-header">
    <div class="container">
      <div class="header-content">
        <div class="brand">
          <div class="brand-icon">ğŸ¥</div>
          <span>MedDigital</span>
        </div>
        <div class="header-badge">
          <span>ğŸ”’</span>
          <span>Seguro</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Progress -->
  <div class="progress-wrapper">
    <div class="container">
      <div class="progress-container">
        <div class="progress-fill" id="progressFill" style="width: 22%"></div>
      </div>
      <p class="progress-text" id="progressText">Iniciando avaliaÃ§Ã£o...</p>
    </div>
  </div>

  <!-- Quiz Container -->
  <main class="quiz-container" style="padding: 1.5rem 0;">
    <div class="container">
      
      <!-- STEP 1: Sintoma Principal -->
      <div class="question-card" id="step-1">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Qual sintoma estÃ¡ dominando seu corpo <span style="color: var(--accent-red);">AGORA</span>?</h2>
            <p class="card-subtitle">Selecione o sintoma mais intenso no momento</p>
          </div>
          <div class="options-list">
            <div class="option-item" data-value="gripe" onclick="quizApp.selectOption(1, 'gripe', 'Gripe/Febre/Fraqueza')">
              <div class="option-icon-box gripe">ğŸ¤’</div>
              <div class="option-content">
                <div class="option-title">Gripe / Febre / Fraqueza</div>
                <div class="option-desc">Tosse, coriza, mal-estar geral</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="dor" onclick="quizApp.selectOption(1, 'dor', 'Dor Muscular/Articular')">
              <div class="option-icon-box dor">ğŸ’ª</div>
              <div class="option-content">
                <div class="option-title">Dor Muscular / Articular</div>
                <div class="option-desc">Dores no corpo, limitaÃ§Ã£o de movimento</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="cabeca" onclick="quizApp.selectOption(1, 'cabeca', 'Enxaqueca/Tontura')">
              <div class="option-icon-box cabeca">ğŸ§ </div>
              <div class="option-content">
                <div class="option-title">Enxaqueca / Tontura</div>
                <div class="option-desc">Dor de cabeÃ§a intensa, vertigem</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="estomago" onclick="quizApp.selectOption(1, 'estomago', 'Mal-estar GÃ¡strico')">
              <div class="option-icon-box estomago">ğŸ¤¢</div>
              <div class="option-content">
                <div class="option-title">Mal-estar GÃ¡strico</div>
                <div class="option-desc">NÃ¡useas, azia, cÃ³licas abdominais</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="ansiedade" onclick="quizApp.selectOption(1, 'ansiedade', 'Crise de Ansiedade')">
              <div class="option-icon-box ansiedade">ğŸ’­</div>
              <div class="option-content">
                <div class="option-title">Crise de Ansiedade / Estresse</div>
                <div class="option-desc">Aperto no peito, insÃ´nia, nervosismo</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
          </div>
        </div>
        <div class="alert alert-info" id="alert-sintoma" style="display: none;"></div>
      </div>

      <!-- STEP 2: Tempo -->
      <div class="question-card hidden" id="step-2">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">HÃ¡ quanto tempo seu organismo pede socorro?</h2>
            <p class="card-subtitle">Isso ajuda a determinar a necessidade de repouso</p>
          </div>
          <div class="options-list">
            <div class="option-item" data-value="hoje" onclick="quizApp.selectOption(2, 'hoje', 'ComeÃ§ou hoje')">
              <div class="option-icon-box tempo">â°</div>
              <div class="option-content">
                <div class="option-title">ComeÃ§ou hoje (agora hÃ¡ pouco)</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="ontem" onclick="quizApp.selectOption(2, 'ontem', 'Desde ontem')">
              <div class="option-icon-box" style="background: #fce7f3;">ğŸ“…</div>
              <div class="option-content">
                <div class="option-title">Desde ontem</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="48h" onclick="quizApp.selectOption(2, '48h', 'Mais de 48h')">
              <div class="option-icon-box" style="background: #fee2e2;">âš ï¸</div>
              <div class="option-content">
                <div class="option-title">Mais de 48 horas</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
          </div>
        </div>
      </div>

      <!-- STEP 3: Escala de Dor -->
      <div class="question-card hidden" id="step-3">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Em uma escala de 1 a 10, seu corpo estÃ¡ pedindo para parar?</h2>
            <p class="card-subtitle">Avalie a intensidade dos seus sintomas</p>
          </div>
          <div class="slider-container">
            <input type="range" min="1" max="10" value="5" class="slider" id="painSlider" oninput="quizApp.updatePainLevel(this.value)">
            <div class="slider-labels">
              <span>Leve (1)</span>
              <span>Moderado (5)</span>
              <span>Intenso (10)</span>
            </div>
            <div class="slider-value" id="painValue">NÃ­vel 5: Desconforto significativo</div>
          </div>
          <button class="btn btn-primary w-full" onclick="quizApp.submitPainLevel(3)" style="margin-top: 1.5rem;">
            Continuar AvaliaÃ§Ã£o â†’
          </button>
        </div>
      </div>

      <!-- STEP 4: Sinais de Alerta -->
      <div class="question-card hidden" id="step-4">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">VocÃª apresenta algum desses sinais de alerta?</h2>
            <p class="card-subtitle">Marque todos que se aplicam ao seu caso</p>
          </div>
          <div class="options-list">
            <label class="checkbox-item" onclick="quizApp.toggleCheckbox(this, 'febre')">
              <div class="checkbox-box"></div>
              <div class="checkbox-text">Febre acima de 37,5Â°C</div>
            </label>
            <label class="checkbox-item" onclick="quizApp.toggleCheckbox(this, 'cama')">
              <div class="checkbox-box"></div>
              <div class="checkbox-text">Dificuldade para levantar da cama</div>
            </label>
            <label class="checkbox-item" onclick="quizApp.toggleCheckbox(this, 'vomito')">
              <div class="checkbox-box"></div>
              <div class="checkbox-text">VÃ´mitos ou nÃ¡useas persistentes</div>
            </label>
            <label class="checkbox-item" onclick="quizApp.toggleCheckbox(this, 'dor_intensa')">
              <div class="checkbox-box"></div>
              <div class="checkbox-text">Dor intensa ao movimentar</div>
            </label>
            <label class="checkbox-item" onclick="quizApp.toggleCheckbox(this, 'falta_ar')">
              <div class="checkbox-box"></div>
              <div class="checkbox-text">Falta de ar ou dificuldade para respirar</div>
            </label>
          </div>
          <button class="btn btn-primary w-full" onclick="quizApp.submitCheckboxes(4)" style="margin-top: 1.5rem;">
            Continuar â†’
          </button>
        </div>
        <div class="alert alert-warning" id="alert-checkboxes" style="display: none;"></div>
      </div>

      <!-- STEP 5: RemÃ©dio Caseiro -->
      <div class="question-card hidden" id="step-5">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">JÃ¡ tentou "aguentar" tomando remÃ©dio caseiro?</h2>
            <p class="card-subtitle">Informe se jÃ¡ fez alguma tentativa de alÃ­vio</p>
          </div>
          <div class="options-list">
            <div class="option-item" data-value="nao_resolveu" onclick="quizApp.selectOption(5, 'nao_resolveu', 'RemÃ©dio nÃ£o resolveu', {id: 'alert-remedio', condition: v => v === 'nada', message: '<strong>AtenÃ§Ã£o:</strong> Postergar tratamento pode aumentar o tempo de recuperaÃ§Ã£o.', delay: 1000})">
              <div class="option-icon-box" style="background: #fecaca;">ğŸ’Š</div>
              <div class="option-content">
                <div class="option-title">Sim, tomei remÃ©dio e nÃ£o resolveu</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="caseiro" onclick="quizApp.selectOption(5, 'caseiro', 'SÃ³ chÃ¡/caseiro', {id: 'alert-remedio', condition: v => v === 'nada', message: '<strong>AtenÃ§Ã£o:</strong> Postergar tratamento pode aumentar o tempo de recuperaÃ§Ã£o.', delay: 1000})">
              <div class="option-icon-box" style="background: #fef3c7;">ğŸµ</div>
              <div class="option-content">
                <div class="option-title">SÃ³ chÃ¡ ou remÃ©dio caseiro</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="nada" onclick="quizApp.selectOption(5, 'nada', 'Estou aguentando', {id: 'alert-remedio', condition: v => v === 'nada', message: '<strong>AtenÃ§Ã£o:</strong> Postergar tratamento pode aumentar o tempo de recuperaÃ§Ã£o.', delay: 1000})">
              <div class="option-icon-box" style="background: #e5e7eb;">âŒ</div>
              <div class="option-content">
                <div class="option-title">NÃ£o tomei nada (estou aguentando)</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
          </div>
        </div>
        <div class="alert alert-danger" id="alert-remedio" style="display: none;"></div>
      </div>

      <!-- STEP 6: Trabalho -->
      <div class="question-card hidden" id="step-6">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Seu trabalho exige foco mental ou operaÃ§Ã£o de mÃ¡quinas?</h2>
            <p class="card-subtitle">Isso determina a necessidade de atestado prioritÃ¡rio</p>
          </div>
          <div class="options-list">
            <div class="option-item" data-value="raciocinio" onclick="quizApp.selectOption(6, 'raciocinio', 'Foco mental')">
              <div class="option-icon-box" style="background: #dbeafe;">ğŸ§ </div>
              <div class="option-content">
                <div class="option-title">Sim, preciso raciocinar claramente</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="maquinas" onclick="quizApp.selectOption(6, 'maquinas', 'Opero mÃ¡quinas', {id: 'alert-maquinas', condition: v => v === 'maquinas', message: 'ğŸš¨ <strong>Risco de acidente detectado!</strong> Atestado prioritÃ¡rio indicado para sua seguranÃ§a.', delay: 1000})">
              <div class="option-icon-box" style="background: #fee2e2;">âš™ï¸</div>
              <div class="option-content">
                <div class="option-title">Sim, opero mÃ¡quinas/veÃ­culos</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="presenca" onclick="quizApp.selectOption(6, 'presenca', 'Preciso estar presente')">
              <div class="option-icon-box" style="background: #dcfce7;">ğŸ‘¤</div>
              <div class="option-content">
                <div class="option-title">Preciso estar presente, mas nÃ£o opero mÃ¡quinas</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
          </div>
        </div>
        <div class="alert alert-danger" id="alert-maquinas" style="display: none;"></div>
      </div>

      <!-- STEP 7: Piora -->
      <div class="question-card hidden" id="step-7">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Se vocÃª for trabalhar hoje, sente que vai piorar?</h2>
            <p class="card-subtitle">Avalie honestamente sua condiÃ§Ã£o</p>
          </div>
          <div class="options-list">
            <div class="option-item" data-value="sim" onclick="quizApp.selectOption(7, 'sim', 'Vou me sentir pior')">
              <div class="option-icon-box" style="background: #fecaca;">ğŸ˜”</div>
              <div class="option-content">
                <div class="option-title">Sim, vou me sentir pior</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="talvez" onclick="quizApp.selectOption(7, 'talvez', 'Talvez')">
              <div class="option-icon-box" style="background: #fef3c7;">ğŸ¤”</div>
              <div class="option-content">
                <div class="option-title">Talvez</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="nao_renderei" onclick="quizApp.selectOption(7, 'nao_renderei', 'NÃ£o renderei nada')">
              <div class="option-icon-box" style="background: #e5e7eb;">ğŸ“‰</div>
              <div class="option-content">
                <div class="option-title">NÃ£o vou piorar, mas nÃ£o renderei nada</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
          </div>
        </div>
        <div class="alert alert-info" id="alert-piora" style="margin-top: 1rem; display: flex;">
          <span class="alert-icon">ğŸ’¡</span>
          <div class="alert-content"><strong>Sua saÃºde Ã© prioridade</strong> sobre produtividade temporÃ¡ria.</div>
        </div>
      </div>

      <!-- STEP 8: Quando Precisa -->
      <div class="question-card hidden" id="step-8">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">VocÃª precisa justificar ausÃªncia para:</h2>
          </div>
          <div class="options-list">
            <div class="option-item" data-value="hoje" onclick="quizApp.selectOption(8, 'hoje', 'Hoje (urgente)')">
              <div class="option-icon-box" style="background: #fecaca;">ğŸ”´</div>
              <div class="option-content">
                <div class="option-title">Hoje (urgente)</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="amanha" onclick="quizApp.selectOption(8, 'amanha', 'AmanhÃ£')">
              <div class="option-icon-box" style="background: #fef3c7;">ğŸŸ¡</div>
              <div class="option-content">
                <div class="option-title">AmanhÃ£</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="retroativo" onclick="quizApp.selectOption(8, 'retroativo', 'Retroativo')">
              <div class="option-icon-box" style="background: #e0e7ff;">ğŸ“„</div>
              <div class="option-content">
                <div class="option-title">Retroativo (ontem)</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
          </div>
        </div>
      </div>

      <!-- STEP 9: CID -->
      <div class="question-card hidden" id="step-9">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Sua empresa exige CID especÃ­fico no documento?</h2>
          </div>
          <div class="options-list">
            <div class="option-item" data-value="sim" onclick="quizApp.selectOption(9, 'sim', 'Sim, RH pede cÃ³digo')">
              <div class="option-icon-box" style="background: #dbeafe;">ğŸ“‹</div>
              <div class="option-content">
                <div class="option-title">Sim, RH pede cÃ³digo</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="nao_sei" onclick="quizApp.selectOption(9, 'nao_sei', 'NÃ£o sei')">
              <div class="option-icon-box" style="background: #fef3c7;">â“</div>
              <div class="option-content">
                <div class="option-title">NÃ£o sei</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="nao" onclick="quizApp.selectOption(9, 'nao', 'Aceitam atestado simples')">
              <div class="option-icon-box" style="background: #dcfce7;">âœ…</div>
              <div class="option-content">
                <div class="option-title">NÃ£o, aceitam atestado simples</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
          </div>
        </div>
        <div class="alert alert-info" style="margin-top: 1rem; display: flex;">
          <span class="alert-icon">ğŸ¤–</span>
          <div class="alert-content"><strong>IA MÃ©dica:</strong> Nosso sistema selecionarÃ¡ automaticamente o CID mais adequado ao seu caso clÃ­nico.</div>
        </div>
      </div>

      <!-- STEP 10: Nome -->
      <div class="question-card hidden" id="step-10">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Qual seu nome completo para o laudo oficial?</h2>
            <p class="card-subtitle">Digite conforme aparece em seu documento</p>
          </div>
          <div class="input-group">
            <input type="text" class="input-field" id="nomeInput" placeholder="Ex: JoÃ£o Silva Santos" oninput="quizApp.updateNome(this.value)">
            <div class="input-feedback" id="feedbackNome"></div>
          </div>
          <div class="input-preview" id="nomePreview">
            <div class="input-preview-label">Gerando laudo para:</div>
            <div class="input-preview-value" id="nomePreviewText"></div>
          </div>
          <button class="btn btn-primary w-full" onclick="quizApp.submitNome(10)" id="btnNome" disabled>
            Continuar â†’
          </button>
        </div>
      </div>

      <!-- STEP 11: CPF -->
      <div class="question-card hidden" id="step-11">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Seu CPF para validaÃ§Ã£o digital do documento</h2>
            <p class="card-subtitle">ObrigatÃ³rio para assinatura ICP-Brasil</p>
          </div>
          <div class="input-group">
            <input type="text" class="input-field" id="cpfInput" placeholder="000.000.000-00" maxlength="14" oninput="quizApp.formatCPF(this)">
            <div class="input-feedback" id="feedbackCPF"></div>
          </div>
          <button class="btn btn-primary w-full" onclick="quizApp.submitCPF(11)" id="btnCPF" disabled>
            Continuar â†’
          </button>
        </div>
      </div>

      <!-- STEP 12: Email -->
      <div class="question-card hidden" id="step-12">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Email para envio do documento</h2>
            <p class="card-subtitle">VocÃª receberÃ¡ o PDF em segundos apÃ³s aprovaÃ§Ã£o</p>
          </div>
          <div class="input-group">
            <input type="email" class="input-field" id="emailInput" placeholder="seu@email.com" oninput="quizApp.validateEmail(this.value)">
            <div class="input-feedback" id="feedbackEmail"></div>
          </div>
          <button class="btn btn-primary w-full" onclick="quizApp.submitEmail(12)" id="btnEmail" disabled>
            Continuar â†’
          </button>
        </div>
      </div>

      <!-- STEP 13: ConfirmaÃ§Ã£o -->
      <div class="question-card hidden" id="step-13">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">ConfirmaÃ§Ã£o de Veracidade</h2>
            <p class="card-subtitle">Ãšltimo passo antes da anÃ¡lise mÃ©dica final</p>
          </div>
          <label class="checkbox-item" onclick="quizApp.toggleConfirm(this)" style="padding: 1.25rem;">
            <div class="checkbox-box"></div>
            <div>
              <div style="font-weight: 600; margin-bottom: 0.25rem;">Sim, confirmo a veracidade dos sintomas</div>
              <div style="font-size: 0.8125rem; color: var(--gray-500);">Declaro que as informaÃ§Ãµes sÃ£o verdadeiras sob responsabilidade</div>
            </div>
          </label>
          <div class="alert alert-danger" style="margin-top: 1rem; display: flex;">
            <span class="alert-icon">âš ï¸</span>
            <div class="alert-content" style="font-size: 0.8125rem;"><strong>Aviso legal:</strong> Falsidade em documento mÃ©dico constitui crime previsto no art. 299 do CÃ³digo Penal.</div>
          </div>
          <button class="btn btn-primary w-full" onclick="quizApp.submitConfirm(13)" id="btnConfirm" disabled style="margin-top: 1.5rem;">
            Prosseguir para Assinatura â†’
          </button>
        </div>
      </div>

      <!-- STEP 14: Assinatura -->
      <div class="question-card hidden" id="step-14">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Assinatura Digital do Paciente</h2>
            <p class="card-subtitle">Toque e arraste para assinar no quadro abaixo</p>
          </div>
          <div class="signature-wrapper">
            <div style="font-size: 0.8125rem; color: var(--gray-500); margin-bottom: 0.75rem;">Toque e arraste para assinar</div>
            <canvas class="signature-canvas" id="signatureCanvas"></canvas>
            <button class="signature-clear" onclick="quizApp.clearSignature()">Limpar assinatura</button>
          </div>
          <button class="btn btn-primary w-full" onclick="quizApp.submitSignature(14)" id="btnSignature" disabled style="margin-top: 1.5rem;">
            Confirmar Assinatura â†’
          </button>
        </div>
      </div>

      <!-- STEP 15: Dias -->
      <div class="question-card hidden" id="step-15">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">A IA recomenda repouso. VocÃª precisa de:</h2>
          </div>
          <div class="options-list">
            <div class="option-item" data-value="1" onclick="quizApp.selectDays(1)">
              <div class="option-icon-box" style="background: #fef3c7;">1ï¸âƒ£</div>
              <div class="option-content">
                <div class="option-title">1 dia (24 horas)</div>
                <div class="option-desc">Repouso parcial</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="2" onclick="quizApp.selectDays(2)">
              <div class="option-icon-box" style="background: #fde68a;">2ï¸âƒ£</div>
              <div class="option-content">
                <div class="option-title">2 dias (48 horas)</div>
                <div class="option-desc">Repouso recomendado</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
            <div class="option-item" data-value="ia" onclick="quizApp.selectDays('ia')">
              <div class="option-icon-box" style="background: #dbeafe;">ğŸ¤–</div>
              <div class="option-content">
                <div class="option-title">Deixar a IA decidir</div>
                <div class="option-desc">Baseado nos seus sintomas</div>
              </div>
              <div class="option-check">âœ“</div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- Loading Screen -->
  <div class="loading-overlay hidden" id="loadingScreen">
    <div class="loading-icon">
      <div class="loading-spinner"></div>
      <div class="loading-icon-inner">ğŸ¤–</div>
    </div>
    <div class="loading-title">IA MÃ©dica Processando...</div>
    <div class="loading-bar">
      <div class="loading-progress" id="loadingProgress" style="width: 0%"></div>
    </div>
    <div class="loading-status" id="loadingStatus">Analisando padrÃµes de sintomas...</div>
  </div>

  <!-- Modal -->
  <div class="modal-overlay hidden" id="modal">
    <div class="modal">
      <h3 class="modal-title" id="modalTitle"></h3>
      <p class="modal-text" id="modalText"></p>
      <div class="modal-buttons" id="modalButtons"></div>
    </div>
  </div>

  <script src="src/scripts/quiz.js"></script>
</body>
</html>
